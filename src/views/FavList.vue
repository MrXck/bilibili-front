<template>    <div class="item">        <div class="content">            <div class="tabs" ref="tabs">                <div class="title">我创建的</div>                <div v-if="user.id === route.params.id" class="tab" @click="newFolder">                    <span>新建收藏夹</span>                </div>                <div :class="index === tabIndex ? 'tab active' : 'tab'" v-for="(item, index) in folderList"                     :key="item.favorites.id" @click="switchTab(index)">                    <span>{{ item.favorites.name }}</span>                    <span class="num">{{ item.num }}</span>                    <span class="edit" @click.stop="updateModal(item.favorites)">编辑</span>                </div>            </div>            <div v-if="tabIndex !== -1" class="video">                <div class="cover">                    <div>                        <img class="img"                             :src="favoriteList.length === 0 || favoriteList[0].dynamic.coverSrc === null ? logo : favoriteList[0].dynamic.coverSrc"                             alt="">                    </div>                    <div class="right">                        <span class="folder-name">{{ folderList[tabIndex].favorites.name }}</span>                        <span class="create">创建者：{{ mainStore.user.nickname }}                            <span v-if="favoriteList.length > 0">播放数：{{ favoriteList[0].playNum }}</span>                        </span>                        <span class="create">{{ folderList[tabIndex].num }}个内容 ·                            <span>{{ folderList[tabIndex].favorites.isPublic === 1 ? '公开' : '私有' }}</span>                        </span>                    </div>                </div>                <div class="favorite-item">                    <VideoItem v-for="item in favoriteList" :item="item"/>                </div>                <Pagination :total="total" :pageNum="pageNum" @update="updatePage"/>            </div>        </div>    </div>    <div class="background" ref="background"></div>    <div class="modal" ref="modal">        <div class="close" @click="closeModal">            <svg data-v-5eb7422a="" viewBox="0 0 40 40">                <path                    d="M22.83,20,38.42,4.41a2,2,0,1,0-2.83-2.83h0L20,17.17,4.41,1.58A2,2,0,0,0,1.58,4.41L17.17,20,1.58,35.59a2,2,0,0,0,2.83,2.83L20,22.83,35.59,38.42a2,2,0,1,0,2.83-2.83Z"></path>            </svg>        </div>        <div class="detail">            收藏夹信息        </div>        <div class="form">            收藏夹名称            <input v-model="favorites.name" class="input" type="text">        </div>        <div class="form">            <input :checked="favorites.isPublic === 1" @click="setPublic" type="checkbox">            是否公开        </div>        <div class="form">            <div class="button" @click="update">提交</div>        </div>    </div>    <div class="modal" ref="newModal">        <div class="close" @click="closeModal">            <svg data-v-5eb7422a="" viewBox="0 0 40 40">                <path                    d="M22.83,20,38.42,4.41a2,2,0,1,0-2.83-2.83h0L20,17.17,4.41,1.58A2,2,0,0,0,1.58,4.41L17.17,20,1.58,35.59a2,2,0,0,0,2.83,2.83L20,22.83,35.59,38.42a2,2,0,1,0,2.83-2.83Z"></path>            </svg>        </div>        <div class="detail">            收藏夹信息        </div>        <div class="form">            收藏夹名称            <input v-model="favorites.name" class="input" type="text">        </div>        <div class="form">            <input :checked="favorites.isPublic === 1" @click="setPublic" type="checkbox">            是否公开        </div>        <div class="form">            <div class="button" @click="create">提交</div>        </div>    </div></template><script>import {getCurrentInstance, onMounted, reactive, ref} from 'vue'import request from '@/utils/request'import {CreateFavorites, GetFavoriteById, GetFavoritesById, UpdateFavorites} from '@/utils/Constant'import {useRoute} from 'vue-router'import logo from '@/assets/logo.png'import {useMainStore} from '@/store'import VideoItem from '@/components/VideoItem'import Pagination from '@/components/Pagination'export default {    name: 'FavList',    components: {VideoItem, Pagination},    setup() {        let modal        let newModal        let background        let route = useRoute()        let mainStore = useMainStore()        let pageNum = ref(1)        let total = ref(0)        let pageSize = ref(20)        let favoriteList = reactive([])        let favorites = ref({            name: '',            isPublic: 0,        })        let folderList = reactive([])        let tabIndex = ref(-1)        let user = JSON.parse(localStorage.getItem('user'))        onMounted(() => {            modal = getCurrentInstance().refs.modal            newModal = getCurrentInstance().refs.newModal            background = getCurrentInstance().refs.background            init()        })        function init() {            request.get(GetFavoritesById + route.params.id).then(res => {                if (res.data.code === 0) {                    folderList.length = 0                    folderList.push(...res.data.data)                }            })        }        function newFolder() {            newModal.style.display = 'flex'            background.style.display = 'block'        }        function closeModal() {            modal.style.display = 'none'            background.style.display = 'none'            newModal.style.display = 'none'            favorites.value = {                name: '',                isPublic: 0,            }        }        function setPublic(event) {            favorites.value.isPublic = event.target.checked ? 1 : 0        }        function updateModal(item) {            modal.style.display = 'flex'            background.style.display = 'block'            favorites.value = {                name: item.name,                isPublic: item.isPublic,                id: item.id,                userId: item.userId,            }        }        function update() {            request.post(UpdateFavorites, {                favorites: favorites.value,            }).then(res => {                if (res.data.code === 0) {                    closeModal()                }            }).finally(() => {                init()            })        }        function create() {            request.post(CreateFavorites, {                favorites: favorites.value,            }).then(res => {                if (res.data.code === 0) {                    closeModal()                }            }).finally(() => {                init()            })        }        function updatePage(value) {            pageNum.value = value            init()        }        function switchTab(index) {            tabIndex.value = index            request.post(GetFavoriteById, {                pageNum: pageNum.value,                pageSize: pageSize.value,                favoritesId: folderList[tabIndex.value].favorites.id,            }).then(res => {                if (res.data.code === 0) {                    favoriteList.length = 0                    let list = res.data.data                    let page = list.splice(0, 1)[0]                    total.value = page.page.pages                    favoriteList.push(...list)                }            })        }        return {            newFolder,            closeModal,            setPublic,            updateModal,            update,            create,            updatePage,            switchTab,            favorites,            folderList,            user,            route,            tabIndex,            mainStore,            total,            pageNum,            favoriteList,            logo,        }    },}</script><style scoped>@media screen and (max-width: 1402px) {    .item {        width: 1082px;    }}@media screen and (min-width: 1402px) {    .item {        width: 1262px;    }}.item {    width: 100%;}.content {    margin-top: 10px;    display: flex;    border: #eeeeee solid 1px;    background-color: white;    border-radius: 4px;    min-height: 518px;    width: 100%;}.tabs {    width: 179px;    border-right: #eeeeee solid 1px;    overflow-y: auto;}.tab {    height: 44px;    padding: 0 20px;    display: flex;    justify-content: space-between;    align-items: center;    cursor: pointer;    font-size: 14px;    transition: color .3s;}.tab:hover {    color: #23aedb;}.tab:hover .edit {    display: inline-block;}.tab:hover .num {    display: none;}.active {    color: white !important;    background-color: #23aedb;}.title {    color: #99a2aa;    padding-left: 20px;    height: 54px;    line-height: 54px;    width: 159px;}.background {    position: fixed;    top: 0;    left: 0;    right: 0;    bottom: 0;    z-index: 900;    background-color: #555555;    opacity: .3;    display: none;}.modal {    position: fixed;    top: 30%;    left: 35%;    z-index: 999;    background-color: white;    width: 440px;    flex-direction: column;    border-radius: 4px;    display: none;}.modal .input {    display: block;    width: 374px;    height: 30px;    line-height: 30px;    font-size: 14px;    padding: 0 12px;    border-radius: 2px;    border: 1px solid #ccd0d7;    margin-top: 8px;    cursor: auto;    outline: none;}.modal .form {    margin-top: 20px;    padding: 0 20px;}.detail {    display: flex;    height: 44px;    width: 100%;    justify-content: center;    align-items: center;    border-bottom: #eeeeee solid 1px;}.button {    width: 65px;    height: 32px;    line-height: 32px;    font-size: 14px;    color: #fff;    background-color: #00a1d6;    text-align: center;    border-radius: 2px;    cursor: pointer;    margin: 8px auto 20px;}.close {    width: 10px;    position: absolute;    right: 20px;    top: 8px;    cursor: pointer;}.edit {    display: none;}.video {    width: calc(100% - 219px);    padding: 20px;}.img {    width: 190px;    height: 120px;    border-radius: 4px;    cursor: pointer;}.cover {    display: flex;    padding-bottom: 20px;    border-bottom: #eeeeee solid 1px;}.right {    display: flex;    flex-direction: column;    margin-left: 20px;}.create {    color: #99a2aa;    font-size: 12px;}.folder-name {    font-size: 14px;}.favorite-item {    display: flex;    flex-wrap: wrap;    justify-content: flex-start;    padding: 10px;}</style>