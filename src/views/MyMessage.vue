<template>    <div class="top">        <div class="title">我的消息</div>    </div>    <div class="card">        <div class="tabs">            <div class="describe">近期消息</div>            <div :class="route.params.id === item.id ? 'tab active' : 'tab'" v-for="item in historyList"                 @click="toChat(item.id)">                <div class="close" @click.stop="deleteHistory(item.id)">                    <svg data-v-5eb7422a="" viewBox="0 0 40 40">                        <path                            d="M22.83,20,38.42,4.41a2,2,0,1,0-2.83-2.83h0L20,17.17,4.41,1.58A2,2,0,0,0,1.58,4.41L17.17,20,1.58,35.59a2,2,0,0,0,2.83,2.83L20,22.83,35.59,38.42a2,2,0,1,0,2.83-2.83Z"></path>                    </svg>                </div>                <div class="img">                    <img class="avatar" :src="item.avatar === '' ? logo : item.avatar" alt="">                </div>                <div class="user">                    <div class="nickname">{{ item.nickname }}</div>                    <div class="history"></div>                </div>            </div>        </div>        <div class="content">            <RouterView/>        </div>    </div></template><script>import {onMounted, reactive, ref} from 'vue'import logo from '@/assets/logo.png'import ChatWindow from '@/views/ChatWindow'import request from '@/utils/request'import {GetHistory, RemoveHistory} from '@/utils/Constant'import {useRoute, useRouter} from 'vue-router'export default {    name: 'MyMessage',    components: {ChatWindow},    setup() {        let historyList = reactive([])        let pageSize = ref(20)        let router = useRouter()        let route = useRoute()        function deleteHistory(id) {            request.post(RemoveHistory, {id}).then(res => {                if (res.data.code === 0) {                    historyList.splice(historyList.indexOf(id), 1)                    router.push('/message/whisper')                }            })        }        function init() {            request.post(GetHistory, {                pageSize: pageSize.value,            }).then(res => {                if (res.data.code === 0) {                    historyList.length = 0                    historyList.push(...res.data.data.users)                }            })        }        function toChat(id) {            router.push(`/message/whisper/${id}`)        }        onMounted(() => {            init()        })        return {            logo,            historyList,            route,            deleteHistory,            toChat,        }    },}</script><style scoped>.top {    width: calc(100% - 140px);    height: 42px;    background-color: white;    border-radius: 4px;    display: flex;    align-items: center;    box-shadow: 0 2px 4px 0 rgba(121, 146, 185, 0.54);}.title {    padding: 0 16px;    color: #666666;}.card {    margin-top: 10px;    width: calc(100% - 140px);    height: calc(100vh - 64px - 42px - 30px);    background-color: white;    border-radius: 4px;    display: flex;    align-items: center;    box-shadow: 0 2px 4px 0 rgba(121, 146, 185, 0.54);}.tabs {    height: 100%;    border-right: #e9eaec solid 1px;    width: 239px;    flex-direction: column;    align-items: center;    justify-content: center;    overflow-y: auto;}.describe {    padding-left: 20px;    height: 35px;    line-height: 35px;    font-size: 14px;    color: #666666;    border-bottom: #e9eaec solid 1px;}.tab {    display: flex;    align-items: center;    height: 78px;    justify-content: center;    width: 100%;    cursor: pointer;    position: relative;}.tab:hover {    background-color: #e4e5e6;}.avatar {    width: 40px;    height: 40px;    border-radius: 50%;}.img {    display: flex;    justify-content: center;    align-items: center;    height: 100%;    flex: 1;}.user {    display: flex;    flex-direction: column;    justify-content: center;    flex: 2;}.history {    color: #a2a2b8;    font-size: 12px;}.close {    width: 14px;    position: absolute;    left: -20px;    opacity: 0;    transition: all .3s;}.close path {    fill: #666666;}.tab:hover .close {    left: 4px;    opacity: 1;}.active {    background-color: #e4e5e6;}.content {    width: calc(100% - 239px);    height: 100%;}</style>