<template>    <div class="item">        <div class="left">            <DynamicItem v-for="item in mainStore.dynamicList" :key="item.id" :item="item"/>        </div>        <div class="right">            <div class="info">                <span>个人资料</span>                <span class="button">修改资料</span>            </div>            <div class="user-detail">                <div class="id">                    <span>ID</span>                    <span>{{ mainStore.userId }}</span>                </div>                <div class="birth">                    <span>生日</span>                    <span>11-28</span>                </div>            </div>        </div>    </div></template><script>import DynamicItem from '@/components/DynamicItem'import request from '@/utils/request'import {GetDynamic} from '@/utils/Constant'import {onBeforeUnmount, onMounted} from 'vue'import {useMainStore} from '@/store'import {useRoute} from 'vue-router'export default {    name: 'UserDynamic',    components: {DynamicItem},    setup(){        let mainStore = useMainStore()        let route = useRoute()        let isLoading = false        let isEnd = false        function init() {            mainStore.userId = route.params.id            getDynamic({userId: route.params.id})        }        function getDynamic(data) {            request.post(GetDynamic, data).then(res => {                if (res.data.code === 0) {                    mainStore.dynamicList.push(...res.data.data)                }            })        }        function scrollDynamic() {            try {                if (!isLoading && !isEnd) {                    if (document.getElementById('app').offsetHeight - window.scrollY - window.innerHeight < 50) {                        let data = {}                        if (mainStore.userId !== '') {                            data.userId = mainStore.userId                        }                        data.dynamicId = mainStore.dynamicList[mainStore.dynamicList.length - 1].dynamic.id                        isLoading = true                        request.post(GetDynamic, data).then(res => {                            if (res.data.code === 0) {                                mainStore.dynamicList.push(...res.data.data)                                if (res.data.data.length === 0) {                                    isEnd = true                                }                            }                        }).finally(() => {                            isLoading = false                        })                    }                }            } catch (e) {            }        }        onMounted(() => {            mainStore.dynamicList.length = 0            init()            window.addEventListener('scroll', scrollDynamic)        })        onBeforeUnmount(() => {            window.removeEventListener('scroll', scrollDynamic)        })        return {            mainStore,        }    }}</script><style scoped>@media screen and (max-width: 1402px) {    .left {        width: 742px;    }}@media screen and (min-width: 1402px) {    .left {        width: 922px;    }}.item {    padding-top: 10px;    display: flex;    justify-content: center;}.left {    border: #eeeeee solid 1px;    /*background-color: white;*/    border-radius: 4px;    /*padding: 20px;*/}.right {    width: 350px;    margin-left: 10px;    border: #eeeeee solid 1px;    background-color: white;    border-radius: 4px;    padding: 20px;}.info {    display: flex;    justify-content: space-between;    font-size: 14px;    border-bottom: #eeeeee solid 1px;    padding-bottom: 20px;}.button {    border: #eeeeee solid 1px;    border-radius: 4px;    font-size: 12px;    padding: 4px;    color: #9499a0;    cursor: pointer;}.user-detail {    display: flex;    padding-top: 20px;    font-size: 12px;    justify-content: space-between;}.id {    width: 50%;}.birth {    width: 50%;}.id span:nth-child(1) {    color: #9499a0;    margin-right: 10px;}.id span:nth-child(2) {    color: #6d757a;}.birth span:nth-child(1) {    color: #9499a0;    margin-right: 10px;}.birth span:nth-child(2) {    color: #6d757a;}</style>