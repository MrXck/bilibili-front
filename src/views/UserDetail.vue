<template>    <div class="background">        <Header/>        <div class="item">            <div class="background-image">                <div class="user-info">                    <div class="user-detail">                        <img class="avatar" :src="user.avatar === '' ? logo : user.avatar" alt="">                        <div class="user">                            <span class="username">{{ user.nickname }}</span>                            <span class="signature">{{ user.signature }}</span>                        </div>                    </div>                    <div v-if="userDetail.id !== route.params.id" class="subscribe">                        <div v-show="!isSubscribe" @click="subscribe" class="subscribe-button">关注</div>                        <div v-show="isSubscribe" @click="unsubscribe" class="unsubscribe-button">取消关注</div>                        <div class="unsubscribe-button" @click="addHistory">发消息</div>                    </div>                </div>            </div>            <div class="inner">                <div class="tab-list" ref="tabs">                    <span class="tab" @click="to('', $event)" ref="home">主页</span>                    <span class="tab" @click="to('dynamic', $event)" ref="dynamic">动态</span>                    <span class="tab" @click="to('video', $event)" ref="video">投稿</span>                    <span class="tab" @click="to('favlist', $event)" ref="favlist">收藏</span>                </div>                <div class="search">                    <input type="text" placeholder="搜索视频、动态">                    <div class="button">                        <svg width="17" height="17" viewBox="0 0 17 17" fill="none"                             xmlns="http://www.w3.org/2000/svg">                            <path fill-rule="evenodd" clip-rule="evenodd"                                  d="M16.3451 15.2003C16.6377 15.4915 16.4752 15.772 16.1934 16.0632C16.15 16.1279 16.0958 16.1818 16.0525 16.2249C15.7707 16.473 15.4456 16.624 15.1854 16.3652L11.6848 12.8815C10.4709 13.8198 8.97529 14.3267 7.44714 14.3267C3.62134 14.3267 0.5 11.2314 0.5 7.41337C0.5 3.60616 3.6105 0.5 7.44714 0.5C11.2729 0.5 14.3943 3.59538 14.3943 7.41337C14.3943 8.98802 13.8524 10.5087 12.8661 11.7383L16.3451 15.2003ZM2.13647 7.4026C2.13647 10.3146 4.52083 12.6766 7.43624 12.6766C10.3517 12.6766 12.736 10.3146 12.736 7.4026C12.736 4.49058 10.3517 2.1286 7.43624 2.1286C4.50999 2.1286 2.13647 4.50136 2.13647 7.4026Z"                                  fill="currentColor"></path>                        </svg>                    </div>                </div>                <div class="user-data">                    <div class="option" @click="to('fans/follow')">                        <span class="describe">关注数</span>                        <span>{{ subscribeNum }}</span>                    </div>                    <div class="option" @click="to('fans/fans')">                        <span class="describe">粉丝数</span>                        <span>{{ fanNum }}</span>                    </div>                </div>            </div>            <router-view/>        </div>    </div></template><script>import logo from '@/assets/logo.png'import Header from '@/components/Header'import {useRoute, useRouter} from 'vue-router'import {getCurrentInstance, onMounted, ref, watch} from 'vue'import request from '@/utils/request'import {    AddHistory,    GetFanNum,    GetIsSubscribe,    GetSubscribeNum,    GetUserById,    Subscribe,    Unsubscribe,} from '@/utils/Constant'import {useMainStore} from '@/store'export default {    name: 'UserDetail',    components: {Header},    setup() {        let router = useRouter()        let route = useRoute()        let tabs = null        let home = null        let dynamic = null        let video = null        let favlist = null        let user = ref({            nickname: '',            signature: '',            avatar: '',        })        let userDetail = JSON.parse(localStorage.getItem('user'))        let isSubscribe = ref(false)        let fanNum = ref(0)        let subscribeNum = ref(0)        let mainStore = useMainStore()        function init() {            request.get(`${GetUserById}/${route.params.id}`).then(res => {                if (res.data.code === 0) {                    user.value = res.data.data                    mainStore.user = res.data.data                }            })            request.get(`${GetSubscribeNum}/${route.params.id}`).then(res => {                if (res.data.code === 0) {                    subscribeNum.value = res.data.data.subscribeNum                }            })            request.get(`${GetFanNum}/${route.params.id}`).then(res => {                if (res.data.code === 0) {                    fanNum.value = res.data.data.fanNum                }            })            if (userDetail.id !== route.params.id) {                request.get(`${GetIsSubscribe}/${route.params.id}`).then(res => {                    if (res.data.code === 0) {                        isSubscribe.value = res.data.data.isSubscribe                    }                })            }            tabs = getCurrentInstance().refs.tabs            home = getCurrentInstance().refs.home            dynamic = getCurrentInstance().refs.dynamic            video = getCurrentInstance().refs.video            favlist = getCurrentInstance().refs.favlist            switchTab(route.path)        }        onMounted(() => {            mainStore.userId = route.params.id            init()        })        function switchTab(path) {            for (let i = 0; i < tabs.children.length; i++) {                tabs.children[i].className = 'tab'            }            if (path.endsWith('dynamic')) {                dynamic.className = 'tab active'            } else if (path.endsWith('video') || path.endsWith('audio') || path.endsWith('article') || path.endsWith('album')) {                video.className = 'tab active'            } else if (path.endsWith('/')) {                home.className = 'tab active'            } else if (path.endsWith('favlist')) {                favlist.className = 'tab active'            }        }        watch(() => route.path, (newVal) => {            switchTab(newVal)        })        function to(path, event) {            for (let i = 0; i < tabs.children.length; i++) {                tabs.children[i].className = 'tab'            }            if (path !== undefined && path !== null) {                router.push(`/space/${route.params.id}/${path}`)            }            if (event !== undefined && event !== null) {                event.target.className = 'tab active'            }        }        function subscribe() {            request.get(`${Subscribe}/${route.params.id}`).then(res => {                if (res.data.code === 0) {                    isSubscribe.value = true                }            })        }        function unsubscribe() {            request.get(`${Unsubscribe}/${route.params.id}`).then(res => {                if (res.data.code === 0) {                    isSubscribe.value = false                }            })        }        function addHistory() {            request.post(AddHistory, {                toId: route.params.id,            }).then(res => {                if (res.data.code === 0) {                    router.push(`/message/whisper/${route.params.id}`)                }            })        }        return {            logo,            user,            fanNum,            subscribeNum,            userDetail,            route,            isSubscribe,            to,            subscribe,            unsubscribe,            addHistory,        }    },}</script><style scoped>.background {    width: 100%;    min-height: 100vh;    background-color: #f4f5f7;}@media screen and (max-width: 1402px) {    .item {        width: 1101px;    }}@media screen and (min-width: 1402px) {    .item {        width: 1283px;    }}.item {    margin: 0 auto;}.background-image {    height: 192px;    position: relative;    background: url("../assets/logo.png") no-repeat 50%;    background-size: cover;}.user-info {    position: absolute;    bottom: 10px;    left: 20px;    display: flex;    justify-content: space-between;    width: 100%;}.user {    display: flex;    flex-direction: column;    justify-content: space-around;    align-items: flex-start;    margin-left: 20px;}.avatar {    border-radius: 50%;    width: 58px;    height: 58px;    border: #dadde7 solid 2px;}.username {    font-size: 18px;    line-height: 18px;}.signature {    font-size: 12px;    line-height: 12px;    color: #d6dee4;}.subscribe {    display: flex;    align-items: center;    margin-right: 100px;}.user-detail {    display: flex;}.inner {    position: sticky;    top: 0;    z-index: 100;    background-color: white;    display: flex;    border-left: #eeeeee solid 1px;    border-bottom: #eeeeee solid 1px;    border-right: #eeeeee solid 1px;    border-radius: 2px;    width: 100%;}.tab-list {    display: flex;    justify-content: space-around;    width: 537px;    height: 66px;    flex: 2;}.search {    flex: 1;    display: flex;    justify-content: center;    align-items: center;    position: relative;}.button {    position: absolute;    right: 40px;    cursor: pointer;}.search input {    outline: none;    border: #23aedb solid 1px;    border-radius: 20px;    height: 30px;    padding: 0 30px 0 10px;}.user-data {    flex: 1;    display: flex;    align-items: center;}.option {    display: flex;    flex-direction: column;    align-content: space-between;    width: 60px;    font-size: 12px;    cursor: pointer;    transition: color .3s;    justify-content: center;    text-align: center;}.describe {    color: #b2aac7;    margin-bottom: 4px;}.option:hover {    color: #23aedb !important;}.tab {    position: relative;    cursor: pointer;    transition: all .3s;    margin-top: 22px;}.tab:hover:after {    position: absolute;    bottom: 0;    left: 0;    right: 0;    content: "";    -webkit-transform: scaleY(.5);    transform: scaleY(.5);    background-color: #23aedb;    height: 5px;}.tab:hover {    color: #23aedb;}.active:after {    position: absolute;    bottom: 0;    left: 0;    right: 0;    content: "";    -webkit-transform: scaleY(.5);    transform: scaleY(.5);    background-color: #23aedb;    height: 5px;}.subscribe-button {    display: flex;    justify-content: center;    align-items: center;    width: 76px;    height: 30px;    border-radius: 4px;    background-color: #f25d8e;    color: white;    font-size: 14px;    border: white 1px solid;    cursor: pointer;}.unsubscribe-button {    display: flex;    justify-content: center;    align-items: center;    width: 76px;    height: 30px;    border-radius: 4px;    background-color: rgba(0, 0, 0, .45);    box-shadow: 0 0 0 2px hsl(0deg 0% 100% / 30%);    color: white;    font-size: 14px;    border: white 1px solid;    margin-left: 20px;    cursor: pointer;}</style>