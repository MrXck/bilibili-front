<template>    <div class="user-card">        <img class="user-card-back" :src="back" alt="">        <div class="user-card-detail">            <img class="avatar" :src="user.avatar === '' ? logo : user.avatar" alt=""                 @click="to(`/space/${user.id}`)">            <div class="user-card-info">                <div class="user-card-username" @click="to(`/space/${user.id}`)">{{ user.nickname }}</div>                <div class="user-card-header">                    <div class="click" @click="to(`/space/${user.id}/fans/follow`)"><span class="num">{{ subscribeNum }}</span>关注</div>                    <div class="click" @click="to(`/space/${user.id}/fans/fans`)"><span class="num">{{ fanNum }}</span>粉丝</div>                    <div><span class="num">{{ starNum }}</span>点赞</div>                </div>                <div class="user-card-body">{{ user.signature === null ? '这个人很懒没有写签名' : user.signature }}</div>                <div class="user-card-footer">                    <div v-show="isSubscribe" class="unsubscribe-button" @click="unsubscribe">已关注</div>                    <div v-show="!isSubscribe" class="subscribe-button" @click="subscribe">关注</div>                    <div class="unsubscribe-button send" @click="addHistory">发消息</div>                </div>            </div>        </div>    </div></template><script>import request from '@/utils/request'import {    AddHistory,    GetAllStarByUserId,    GetFanNum,    GetIsSubscribe,    GetSubscribeNum,    Subscribe,    Unsubscribe,} from '@/utils/Constant'import {onMounted, ref} from 'vue'import back from '@/assets/1.jpg'import logo from '@/assets/logo.png'import {useRouter} from 'vue-router'export default {    name: 'UserCard',    props: {        user: {            type: Object,            required: true,        },    },    setup(props) {        let router = useRouter()        let isSubscribe = ref(false)        let subscribeNum = ref(0)        let fanNum = ref(0)        let starNum = ref(0)        function subscribe() {            request.get(`${Subscribe}/${props.user.id}`).then(res => {                if (res.data.code === 0) {                    isSubscribe.value = true                }            })        }        function unsubscribe() {            request.get(`${Unsubscribe}/${props.user.id}`).then(res => {                if (res.data.code === 0) {                    isSubscribe.value = false                }            })        }        function addHistory() {            request.post(AddHistory, {                toId: props.user.id,            }).then(res => {                if (res.data.code === 0) {                    to(`/message/whisper/${props.user.id}`)                }            })        }        function to(path) {            window.open(router.resolve(path).href, '_blank')        }        function init() {            request.get(`${GetIsSubscribe}/${props.user.id}`).then(res => {                if (res.data.code === 0) {                    isSubscribe.value = res.data.data.isSubscribe                }            })            request.get(`${GetSubscribeNum}/${props.user.id}`).then(res => {                if (res.data.code === 0) {                    subscribeNum.value = res.data.data.subscribeNum                }            })            request.get(`${GetFanNum}/${props.user.id}`).then(res => {                if (res.data.code === 0) {                    fanNum.value = res.data.data.fanNum                }            })            request.get(`${GetAllStarByUserId}/${props.user.id}`).then(res => {                if (res.data.code === 0) {                    starNum.value = res.data.data.starNum                }            })        }        onMounted(() => {            init()        })        return {            back,            logo,            isSubscribe,            subscribeNum,            fanNum,            starNum,            subscribe,            unsubscribe,            addHistory,            to,        }    },}</script><style scoped>.avatar {    width: 48px;    height: 48px;    border-radius: 50%;    cursor: pointer;}.user-card {    display: none;    background-color: white;    border-radius: 8px;    width: 366px;    font-size: 12px;    box-shadow: 0 0 30px 2px rgb(0 0 0 / 10%);    color: #9499a0;    box-sizing: border-box;}.user-card-back {    width: 366px;    border-radius: 8px 8px 0 0;    height: 85px;}.user-card-detail {    padding: 10px;    display: flex;    width: 100%;    box-sizing: border-box;}.user-card-username {    color: #222;    cursor: pointer;    font-size: 14px;    font-weight: 700;}.user-card-info {    display: flex;    flex-direction: column;    justify-content: space-around;    width: 100%;    box-sizing: border-box;}.user-card-header {    display: flex;    justify-content: space-between;    width: 100%;}.user-card-header div {    flex: 1;}.user-card-body {    margin-top: 20px;    font-size: 12px;    -webkit-line-clamp: 2;    color: #9499a0;    display: -webkit-box;    line-height: 16px;    overflow: hidden;    text-overflow: ellipsis;    word-break: break-all;    -webkit-box-orient: vertical;    margin-right: 20px;}.user-card-footer {    margin-top: 16px;    margin-bottom: 10px;    display: flex;}.unsubscribe-button {    align-items: center;    border-radius: 3px;    border-style: solid;    border-width: 1px;    cursor: pointer;    display: flex;    font-size: 14px;    height: 30px;    justify-content: center;    transition: all .3s;    width: 100px;    background-color: #e5e9ef;    border-color: #e5e9ef;    color: #6d757a;}.subscribe-button {    background-color: #00a1d6;    border-color: #00a1d6;    color: #fff;    align-items: center;    border-radius: 3px;    border-style: solid;    border-width: 1px;    cursor: pointer;    display: flex;    font-size: 14px;    height: 30px;    justify-content: center;    transition: all .3s;    width: 100px;}.send {    background-color: #fff;    border-color: #ccd0d7;    color: #6d757a;    margin-left: 20px;}.click {    cursor: pointer;}.num {    color: black;    margin-right: 4px;}</style>