<template>    <div class="header" :style="isSticky ? 'position: sticky;' : 'position: relative;'">        <div class="left">            <div class="logo">                <img class="image" :src="logo" alt="">            </div>            <div @click="to('/')" class="click">首页</div>            <div>xx</div>            <div>xx</div>            <div>xx</div>        </div>        <div class="middle">            <div class="input" ref="input" @click.stop>                <div class="search">                    <div class="item" ref="div">                        <input @focus="inputFocus" type="text" v-model="key" @keyup.enter="toSearch">                        <span v-show="key !== ''" class="clear-input" @click="key = ''">                            <svg viewBox="0 0 1024 1024" width="14" height="14">                                <path d="M512 64.303538c-247.25636 0-447.696462 200.440102-447.696462 447.696462                0 247.254314 200.440102 447.696462 447.696462 447.696462s447.696462-200.440102                447.696462-447.696462S759.25636 64.303538 512 64.303538zM710.491727 665.266709c12.491499                12.491499 12.489452 32.729425-0.002047 45.220924-6.246261 6.246261-14.429641 9.370415-22.611997                9.370415s-16.363689-3.121084-22.60995-9.366322L512 557.222971 358.730221 710.491727                c-6.246261 6.246261-14.429641 9.366322-22.611997 9.366322s-16.365736-3.125177-22.611997-9.370415                c-12.491499-12.491499-12.491499-32.729425 0-45.220924l153.268756-153.266709L313.50725 358.730221                c-12.491499-12.491499-12.489452-32.729425 0.002047-45.220924s32.729425-12.495592 45.220924-0.004093                l153.268756 153.268756 153.268756-153.268756c12.491499-12.491499 32.729425-12.487406 45.220924                0.004093s12.493545 32.729425 0.002047 45.220924L557.225017 512 710.491727 665.266709z"></path>                            </svg>                        </span>                    </div>                    <div class="svg" @click="toSearch">                        <svg width="17" height="17" viewBox="0 0 17 17" fill="none"                             xmlns="http://www.w3.org/2000/svg">                            <path fill-rule="evenodd" clip-rule="evenodd"                                  d="M16.3451 15.2003C16.6377 15.4915 16.4752 15.772 16.1934 16.0632C16.15 16.1279 16.0958 16.1818 16.0525 16.2249C15.7707 16.473 15.4456 16.624 15.1854 16.3652L11.6848 12.8815C10.4709 13.8198 8.97529 14.3267 7.44714 14.3267C3.62134 14.3267 0.5 11.2314 0.5 7.41337C0.5 3.60616 3.6105 0.5 7.44714 0.5C11.2729 0.5 14.3943 3.59538 14.3943 7.41337C14.3943 8.98802 13.8524 10.5087 12.8661 11.7383L16.3451 15.2003ZM2.13647 7.4026C2.13647 10.3146 4.52083 12.6766 7.43624 12.6766C10.3517 12.6766 12.736 10.3146 12.736 7.4026C12.736 4.49058 10.3517 2.1286 7.43624 2.1286C4.50999 2.1286 2.13647 4.50136 2.13647 7.4026Z"                                  fill="currentColor"></path>                        </svg>                    </div>                </div>                <div class="hidden" ref="box">                    <div class="history-header">                        <span>搜索历史</span>                        <span class="clear" @click="clear">清空</span>                    </div>                    <div class="history">                        <div class="history-item" v-for="(item, index) in history" @click="toSearchWithKeyword(item)">                            <span>{{ item }}</span>                            <span class="close" @click.stop="history.splice(index, 1)"><svg viewBox="0 0 1024 1024"                                                                                            width="14" height="14">                                <path d="M512 64.303538c-247.25636 0-447.696462 200.440102-447.696462 447.696462                0 247.254314 200.440102 447.696462 447.696462 447.696462s447.696462-200.440102                447.696462-447.696462S759.25636 64.303538 512 64.303538zM710.491727 665.266709c12.491499                12.491499 12.489452 32.729425-0.002047 45.220924-6.246261 6.246261-14.429641 9.370415-22.611997                9.370415s-16.363689-3.121084-22.60995-9.366322L512 557.222971 358.730221 710.491727                c-6.246261 6.246261-14.429641 9.366322-22.611997 9.366322s-16.365736-3.125177-22.611997-9.370415                c-12.491499-12.491499-12.491499-32.729425 0-45.220924l153.268756-153.266709L313.50725 358.730221                c-12.491499-12.491499-12.489452-32.729425 0.002047-45.220924s32.729425-12.495592 45.220924-0.004093                l153.268756 153.268756 153.268756-153.268756c12.491499-12.491499 32.729425-12.487406 45.220924                0.004093s12.493545 32.729425 0.002047 45.220924L557.225017 512 710.491727 665.266709z"></path>                            </svg></span>                        </div>                    </div>                </div>            </div>        </div>        <div class="right">            <img @click="to('/space/' + user.id)" class="avatar" :src="user.avatar === '' ? logo : user.avatar" alt="">            <div class="option" @click="to('/message')">                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"                     class="right-entry-icon">                    <path                        d="M15.435 17.7717H4.567C2.60143 17.7717 1 16.1723 1 14.2047V5.76702C1 3.80144 2.59942 2.20001 4.567 2.20001H15.433C17.3986 2.20001 19 3.79943 19 5.76702V14.2047C19.002 16.1703 17.4006 17.7717 15.435 17.7717ZM4.567 4.00062C3.59327 4.00062 2.8006 4.79328 2.8006 5.76702V14.2047C2.8006 15.1784 3.59327 15.9711 4.567 15.9711H15.433C16.4067 15.9711 17.1994 15.1784 17.1994 14.2047V5.76702C17.1994 4.79328 16.4067 4.00062 15.433 4.00062H4.567Z"                        fill="currentColor"></path>                    <path                        d="M9.99943 11.2C9.51188 11.2 9.02238 11.0667 8.59748 10.8019L8.5407 10.7635L4.3329 7.65675C3.95304 7.37731 3.88842 6.86226 4.18996 6.50976C4.48954 6.15544 5.0417 6.09699 5.4196 6.37643L9.59412 9.45943C9.84279 9.60189 10.1561 9.60189 10.4067 9.45943L14.5812 6.37643C14.9591 6.09699 15.5113 6.15544 15.8109 6.50976C16.1104 6.86409 16.0478 7.37731 15.6679 7.65675L11.4014 10.8019C10.9765 11.0667 10.487 11.2 9.99943 11.2Z"                        fill="currentColor"></path>                </svg>                <span>消息</span>            </div>            <div class="option" @click="to('/dynamic')">                <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg"                     class="right-entry-icon">                    <g clip-path="url(#clip0)">                        <path                            d="M10 10.743C7.69883 10.743 5.83333 8.87747 5.83333 6.5763C5.83333 4.27512 7.69883 2.40964 10 2.40964V10.743Z"                            stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"></path>                        <path                            d="M10 10.743C10 13.0441 8.1345 14.9096 5.83333 14.9096C3.53217 14.9096 1.66667 13.0441 1.66667 10.743H10Z"                            stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"></path>                        <path                            d="M10 10.743C10 8.44182 11.8655 6.57632 14.1667 6.57632C16.4679 6.57632 18.3333 8.44182 18.3333 10.743H10Z"                            stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"></path>                        <path                            d="M9.99999 10.743C12.3012 10.743 14.1667 12.6085 14.1667 14.9096C14.1667 17.2108 12.3012 19.0763 9.99999 19.0763V10.743Z"                            stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"></path>                    </g>                    <defs>                        <clipPath id="clip0">                            <rect width="20" height="20" fill="currentColor"                                  transform="matrix(-1 0 0 1 20 0.742981)"></rect>                        </clipPath>                    </defs>                </svg>                <span>动态</span>            </div>            <div class="option" @click="to(`/space/${user.id}/favlist`)">                <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg"                     class="right-entry-icon">                    <path fill-rule="evenodd" clip-rule="evenodd"                          d="M11.0505 3.16759L12.7915 6.69573C12.954 7.02647 13.2702 7.25612 13.6349 7.30949L17.5294 7.87474C18.448 8.00817 18.8159 9.13785 18.1504 9.78639L15.3331 12.5334C15.0686 12.7905 14.9481 13.1609 15.0104 13.5256L15.6759 17.4031C15.8328 18.3184 14.8721 19.0171 14.0497 18.5845L10.5661 16.7537C10.2402 16.5823 9.85042 16.5823 9.52373 16.7537L6.04087 18.5845C5.21848 19.0171 4.2578 18.3184 4.41468 17.4031L5.07939 13.5256C5.14166 13.1609 5.02198 12.7905 4.75755 12.5334L1.9394 9.78639C1.27469 9.13785 1.64182 8.00817 2.56126 7.87474L6.4549 7.30949C6.82041 7.25612 7.13578 7.02647 7.29832 6.69573L9.04015 3.16759C9.45095 2.33468 10.6389 2.33468 11.0505 3.16759Z"                          stroke="currentColor" stroke-width="1.6" stroke-linecap="round"                          stroke-linejoin="round"></path>                    <path                        d="M11.603 11.8739C11.413 12.5556 10.7871 13.0554 10.0447 13.0554C9.29592 13.0554 8.66679 12.5467 8.48242 11.8569"                        stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path>                </svg>                <span>收藏</span>            </div>            <div class="option" @click="to('/history')">                <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg"                     class="right-entry-icon">                    <path fill-rule="evenodd" clip-rule="evenodd"                          d="M10 1.74286C5.02955 1.74286 1 5.7724 1 10.7429C1 15.7133 5.02955 19.7429 10 19.7429C14.9705 19.7429 19 15.7133 19 10.7429C19 5.7724 14.9705 1.74286 10 1.74286ZM10.0006 3.379C14.0612 3.379 17.3642 6.68282 17.3642 10.7426C17.3642 14.8033 14.0612 18.1063 10.0006 18.1063C5.93996 18.1063 2.63696 14.8033 2.63696 10.7426C2.63696 6.68282 5.93996 3.379 10.0006 3.379Z"                          fill="currentColor"></path>                    <path d="M9.99985 6.6521V10.743" stroke="currentColor" stroke-width="1.7"                          stroke-linecap="round"></path>                    <path d="M12.4545 10.7427H10" stroke="currentColor" stroke-width="1.7"                          stroke-linecap="round"></path>                </svg>                <span>历史</span>            </div>            <div class="option" @click="to('/watchLater')">                <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg"                     class="right-entry-icon">                    <path fill-rule="evenodd" clip-rule="evenodd"                          d="M10 1.74286C5.02955 1.74286 1 5.7724 1 10.7429C1 15.7133 5.02955 19.7429 10 19.7429C14.9705 19.7429 19 15.7133 19 10.7429C19 5.7724 14.9705 1.74286 10 1.74286ZM10.0006 3.379C14.0612 3.379 17.3642 6.68282 17.3642 10.7426C17.3642 14.8033 14.0612 18.1063 10.0006 18.1063C5.93996 18.1063 2.63696 14.8033 2.63696 10.7426C2.63696 6.68282 5.93996 3.379 10.0006 3.379Z"                          fill="currentColor"></path>                    <path d="M9.99985 6.6521V10.743" stroke="currentColor" stroke-width="1.7"                          stroke-linecap="round"></path>                    <path d="M12.4545 10.7427H10" stroke="currentColor" stroke-width="1.7"                          stroke-linecap="round"></path>                </svg>                <span>稍后</span>            </div>            <div class="option" @click="to('/platform')">                <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg"                     class="right-entry-icon">                    <path fill-rule="evenodd" clip-rule="evenodd"                          d="M9.99999 1.74286C9.92916 1.74286 9.85916 1.74369 9.78833 1.74536C5.85416 1.85453 2.58416 5.14869 2.50166 9.08286C2.44999 11.5404 3.58666 13.7304 5.36999 15.1337C5.52166 15.2529 5.63166 15.4162 5.67333 15.6045L6.30416 18.447C6.51583 19.3987 7.36083 20.0762 8.33583 20.0762H11.6617C12.6383 20.0762 13.4842 19.3987 13.6958 18.4445L14.3275 15.602C14.3692 15.4154 14.4775 15.2537 14.6275 15.1354C16.3733 13.7629 17.5 11.637 17.5 9.24286C17.5 5.10036 14.1425 1.74286 9.99999 1.74286ZM10.0003 3.40939C13.2161 3.40939 15.8336 6.02606 15.8336 9.24273C15.8336 11.0386 15.0186 12.7086 13.5978 13.8252C13.1428 14.1827 12.8244 14.6852 12.7011 15.2402L12.0686 18.0827C12.0269 18.2752 11.8586 18.4094 11.6619 18.4094H8.33609C8.14109 18.4094 7.97359 18.2761 7.93192 18.0852L7.30025 15.2427C7.17609 14.6869 6.85775 14.1827 6.40109 13.8236C4.94359 12.6769 4.12942 10.9619 4.16859 9.11773C4.23192 6.05523 6.77442 3.49606 9.83442 3.41189C9.88942 3.41023 9.94525 3.40939 10.0003 3.40939Z"                          fill="currentColor"></path>                    <path d="M10 6.81299L8.81253 9.18726H11.1875L9.99952 11.561" stroke="currentColor"                          stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path>                </svg>                <span>创作</span>            </div>            <div class="upload-button" @click="to('/upload')">                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"                     class="header-upload-entry__icon">                    <path                        d="M12.0824 10H14.1412C15.0508 10 15.7882 10.7374 15.7882 11.6471V12.8824C15.7882 13.792 15.0508 14.5294 14.1412 14.5294H3.84707C2.93743 14.5294 2.20001 13.792 2.20001 12.8824V11.6471C2.20001 10.7374 2.93743 10 3.84707 10H5.90589"                        stroke="currentColor" stroke-width="1.7" stroke-linecap="round" stroke-linejoin="round"></path>                    <path d="M8.99413 11.2353L8.99413 3.82353" stroke="currentColor" stroke-width="1.7"                          stroke-linecap="round" stroke-linejoin="round"></path>                    <path d="M12.0823 6.29413L8.9941 3.20589L5.90587 6.29413" stroke="currentColor" stroke-width="1.7"                          stroke-linecap="round" stroke-linejoin="round"></path>                </svg>                <span>投稿</span>            </div>        </div>    </div></template><script>import logo from '@/assets/logo.png'import {getCurrentInstance, onMounted, reactive, ref, toRaw} from 'vue'import {useRouter} from 'vue-router'export default {    name: 'Header',    props: {        isSticky: {            type: Boolean,            default: false,        },    },    setup() {        let router = useRouter()        let div = null        let input = null        let box = null        let user = JSON.parse(localStorage.getItem('user')) || {avatar: ''}        let key = ref('')        let history = reactive([])        function toSearch() {            if (key.value !== '') {                if (history.indexOf(key.value) === -1) {                    history.push(key.value)                    localStorage.setItem('history', JSON.stringify(toRaw(history)))                }                router.push(`/search?keyword=${key.value}`)            }        }        onMounted(() => {            div = getCurrentInstance().refs.div            input = getCurrentInstance().refs.input            box = getCurrentInstance().refs.box            document.body.addEventListener('click', inputBlur)            history.length = 0            let item = localStorage.getItem('history')            if (item !== null && item !== undefined) {                history.push(...JSON.parse(item))            }        })        function inputFocus() {            input.className = 'input is-focus'            div.className = 'item active'            box.className = ''        }        function inputBlur() {            input.className = 'input'            div.className = 'item'            box.className = 'hidden'        }        function to(path) {            window.open(router.resolve(path).href, '_blank')        }        function toSearchWithKeyword(item) {            key.value = item            router.push(`/search?keyword=${item}`)        }        function clear() {            history.length = 0            localStorage.setItem('history', JSON.stringify([]))        }        return {            key,            user,            history,            logo,            inputFocus,            to,            toSearch,            toSearchWithKeyword,            clear,        }    },}</script><style scoped>.hidden {    display: none;}.header {    height: 64px;    display: flex;    background-color: white;    box-shadow: 0 2px 4px #00000014;    top: 0;    z-index: 100;}.header > div {    padding: 0 10px;    align-items: center;}.header .left {    display: flex;    flex: 1;}.header .left div {    font-size: 14px;    margin: 0 10px;}.header .logo .image {    height: 40px;}.header .middle {    padding-top: 10px;    display: flex;    align-items: flex-start;    flex: 1;    max-width: 600px;}.header .middle input {    border: none;    outline: none;    height: 30px;    background-color: rgba(253, 254, 255, 0);}.header .middle .input {    border: #e5e7e9 solid 1px;    border-radius: 8px;    padding: 0 4px;    background-color: #f2f3f4;    width: 100%;    transition: all .3s;}.header .middle .input:hover {    background-color: white;}.header .middle .search {    width: 100%;    display: flex;    align-items: center;    height: 40px;    position: relative;}.header .middle .search .item {    width: calc(100% - 10px);    min-width: 200px;    border-radius: 6px;    height: 32px;}.header .middle .search .item input {    width: calc(100% - 30px);    margin: 6px 8px 10px 10px;    height: 20px;    font-size: 14px;    line-height: 20px;}.active {    background-color: #e5e7e9;}.is-focus {    box-shadow: 0 0 30px #0000001a;    background-color: white !important;}.header .middle .search .svg {    width: 32px;    height: 32px;    cursor: pointer;    display: flex;    justify-content: center;    align-items: center;    margin: 0 6px;    border-radius: 6px;}.header .middle .search .svg svg {    width: 12px;}.header .middle .search .svg:hover {    background-color: #e5e7e9;}.header .middle input:active {    border: none;    outline: none;}.header .right {    flex: 1;    display: flex;    align-items: center;}.option {    font-size: 12px;    display: flex;    flex-direction: column;    justify-content: center;    align-items: center;    width: 40px;    margin-left: 10px;    cursor: pointer;}@keyframes bounce-down {    50% {        transform: translateY(-4px);    }    100% {        transform: translateY(0);    }}.option:hover svg {    animation: bounce-down .2s linear infinite;    animation-iteration-count: 1;}.avatar {    border-radius: 50%;    width: 30px;    cursor: pointer;    transition: all 0.6s;}.avatar:hover {    transform: scale(3) translateY(10px) translateX(-10px);}@keyframes scale {    25% {;    }    50% {        transform: scale(1.5) translateY(5px);    }    75% {        transform: scale(2.25) translateY(8px);    }    100% {        transform: scale(3) translateY(10px);    }}.history-header {    padding: 10px;    display: flex;    justify-content: space-between;    align-items: center;}.clear {    font-size: 12px;    color: #999999;    cursor: pointer;}.clear:hover {    color: #23aedb;}.history {    padding: 0 10px 10px 10px;    font-size: 12px;}.history-item {    padding: 5px;    background-color: #f6f7f8;    cursor: pointer;    display: inline-block;    position: relative;    margin: 5px 5px;}.close {    display: none;    position: absolute;    top: -4px;    fill: #ccc}.history-item:hover .close {    display: inline-block;}.history-item:hover {    color: #23aedb;}.clear-input {    position: absolute;    right: 50px;    top: 10px;    fill: #ccc;    cursor: pointer;    transition: all .3s;}.upload-button {    display: flex;    cursor: pointer;    margin-left: 10px;    width: 90px;    height: 34px;    justify-content: center;    align-items: center;    background-color: #fc8bab;    color: white;    border-radius: 8px;    font-size: 14px;    transition: all .3s;}.upload-button svg {    margin-right: 4px;}.upload-button:hover {    background-color: #ff94b4;}.click {    cursor: pointer;}</style>