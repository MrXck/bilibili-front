<template>    <div class="comment">        <div class="order">            <!--            <div class="hot active">按热度排序</div>-->            <div class="time active">按时间排序</div>        </div>        <div class="reply">            <img class="avatar" :src="user.avatar !== '' ? user.avatar : logo" alt="">            <textarea v-model="content" rows="3"></textarea>            <div class="button" @click="addComment">发表评论</div>        </div>        <div class="item">            <CommentItem :item="comment" v-for="comment in item"/>        </div>        <Pagination v-if="showPage && total >= 2" :total="total" :pageNum="pageNum" @update="updatePage"/>        <div v-if="!showPage && item.length > 0" class="more" @click="to(`/dynamicDetail/${dynamicId}`)">展示更多</div>    </div></template><script>import logo from '@/assets/logo.png'import CommentItem from '@/components/CommentItem'import {onMounted, reactive, ref} from 'vue'import {AddDynamicComment, GetDynamicComment} from '@/utils/Constant'import request from '@/utils/request'import {useMainStore} from '@/store'import Pagination from '@/components/Pagination'import {useRouter} from 'vue-router'export default {    name: 'Comment',    components: {Pagination, CommentItem},    props: {        dynamicId: {            type: String,        },        toUserId: {            type: String        },        showPage: {            type: Boolean,            default: false        }    },    setup(props) {        let user = JSON.parse(localStorage.getItem('user'))        let content = ref('')        let mainStore = useMainStore()        let pageNum = ref(1)        let pageSize = ref(20)        let total = ref(0)        let item = reactive([])        let router = useRouter()        function init(){            request.post(GetDynamicComment, {                dynamicId: props.dynamicId,                pageNum: pageNum.value,                pageSize: pageSize.value,            }).then(res => {                if (res.data.code === 0) {                    item.length = 0                    let list = res.data.data                    total.value = list.splice(0, 1)[0].page.pages                    item.push(...list)                }            })        }        onMounted(() => {            init()        })        function addComment() {            if (content.value !== '') {                request.post(AddDynamicComment, {                    content: content.value,                    dynamicId: props.dynamicId,                    toUserId: props.toUserId,                }).then(res => {                    if (res.data.code === 0) {                        mainStore.message('回复成功', 'success')                        content.value = ''                        item.push({                            user: user,                            comment: res.data.data,                        })                    }                })            }        }        function updatePage(value) {            pageNum.value = value            init()        }        function to(path) {            window.open(router.resolve(path).href, '_blank')        }        return {            logo,            user,            content,            item,            total,            pageNum,            addComment,            updatePage,            to,        }    },}</script><style scoped>.comment {    width: 100%;    padding: 30px 20px;}.order {    font-size: 14px;    font-weight: bold;    display: flex;}.hot {    margin-right: 30px;    cursor: pointer;}.active {    color: #23aedb;}.time {    cursor: pointer;}.reply {    display: flex;    margin-top: 20px;}textarea {    border: #23aedb solid 1px;    outline: none;    resize: none;    border-radius: 4px;    padding: 10px;    height: calc(100% - 20px);    flex: 11;}.avatar {    width: 60px;    height: 60px;    margin-right: 10px;}.button {    margin-right: 40px;    background-color: #23aedb;    padding: 10px;    font-size: 14px;    -webkit-line-clamp: 2;    line-clamp: 2;    width: 40px;    text-align: center;    color: white;    margin-left: 10px;    border-radius: 4px;    display: flex;    justify-content: center;    align-items: center;    cursor: pointer;}.more{    display: flex;    justify-content: center;    margin-top: 10px;    cursor: pointer;    transition: color .3s;    color: #6d757a;    font-size: 14px;    width: calc(100% - 40px);}.more:hover{    color: #23aedb;}</style>